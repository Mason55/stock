# 技术改造优先级与可交付物

## 高优先（先做，影响闭环）
- [ ] 启动与数据库解耦 + request-scoped Session
  - 验收：无 Postgres 时可 SQLite 启动；/health degraded；请求结束提交/回滚并关闭。
- [ ] 回测引擎与成本/规则完整
  - 验收：订单/撮合/T+1/涨跌停/税费/滑点；报告模板自动生成。
- [ ] 风控与组合最小闭环
  - 验收：下单前约束检查（单票/集中度/行业/风格/现金）；基本权重优化可复现。
- [ ] 经纪接口与纸上交易
  - 验收：模拟→纸上→小额实盘可切换；订单审计与重放。

## 中优先（增强稳健与可运维）
- [ ] Redis 缓存与限流降级、外部数据 OFFLINE/MOCK 模式
  - 验收：Redis 宕机服务不崩；OFFLINE 走 Mock；有可观测指标。
- [ ] 可观测性与告警（Prometheus/Grafana + 结构化日志 + 追踪）
  - 验收：核心 SLO 告警；链路能追踪到订单级。
- [ ] 模型持久化与 MLOps 初版
  - 验收：模型注册/加载/灰度；漂移监测与阈值告警。

## 低优先（完善生态与规模化）
- [ ] 多经纪路由与执行算法家族（TWAP/VWAP/POV/IS）
- [ ] 多租户/配额/计费/发票/SLA 状态页
- [ ] 合规与审计（数据/建议/操作）
